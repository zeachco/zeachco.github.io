/* Custom Brown/Pumpkin Theme for Pico v2 */

// Configure Pico with pumpkin theme (brown/orange tones)
// Available themes: amber, azure, blue, cyan, fuchsia, green, grey, indigo,
// jade, lime, orange, pink, pumpkin, purple, red, sand, slate, violet, yellow, zinc
@use '@picocss/pico/scss/pico' with (
	$theme-color: 'pumpkin'
);

// CSS variables for mouse-driven animation (with defaults)
:root {
	--mouse-x: 50%;
	--mouse-y: 50%;
	--mouse-rotate: 0deg;
	--mouse-scale: 1;

	// Glass blur effect variables
	--glass-blur-amount: 6px;
	--glass-saturate: 150%;
	--glass-bg: rgba(255, 149, 0, 0.05);
	--glass-border: rgba(255, 149, 0, 0.3);
}

// Composable glass blur effect class
.glass-blur {
	background: var(--glass-bg);
	backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
	-webkit-backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
	border: 2px solid var(--glass-border);
	border-radius: 1rem;
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.3),
		inset 0 1px 0 rgba(255, 255, 255, 0.1),
		inset 0 -1px 0 rgba(0, 0, 0, 0.2);
}

// Custom HTML5 Tooltip Styling (for data-glass-tooltip attributes)
[data-glass-tooltip] {
	position: relative;

	// Tooltip box with glassmorphism effect
	&::before {
		content: attr(data-glass-tooltip);
		position: absolute;
		bottom: 100%;
		left: 50%;
		transform: translateX(-50%) translateY(-0.5rem);

		// Use glass blur with custom tooltip variables
		--glass-blur-amount: 2px;
		--glass-saturate: 180%;
		--glass-bg: rgba(10, 10, 10, 0.75);
		--glass-border: rgba(255, 149, 0, 0.5);
		background: var(--glass-bg);
		backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
		-webkit-backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
		border: 2px solid var(--glass-border);
		box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
		            inset 0 1px 0 rgba(255, 255, 255, 0.1);

		color: rgba(255, 255, 255, 0.95);
		padding: 0.5rem 0.75rem;
		border-radius: 0.5rem;
		font-size: 0.875rem;
		line-height: 1.25;
		white-space: nowrap;
		z-index: 1000;
		pointer-events: none;
		opacity: 0;
		visibility: hidden;
		transition: opacity 0.15s ease-in-out, visibility 0.15s ease-in-out;
		filter: url(#glass-filter);
	}

	// Show tooltip instantly on hover/focus
	&:hover::before,
	&:focus::before {
		opacity: 1;
		visibility: visible;
		transition-delay: 0s;
	}

	// Bottom placement
	&[data-placement='bottom']::before {
		bottom: auto;
		top: 100%;
		transform: translateX(-50%) translateY(0.5rem);
	}

	// Left placement
	&[data-placement='left']::before {
		bottom: auto;
		top: 50%;
		left: auto;
		right: 100%;
		transform: translateY(-50%) translateX(-0.5rem);
	}

	// Right placement
	&[data-placement='right']::before {
		bottom: auto;
		top: 50%;
		left: 100%;
		transform: translateY(-50%) translateX(0.5rem);
	}
}

// Dark background layer
body::before {
	content: '';
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: #0a0a0a;
	z-index: -2;
}

// Animated cells-ai background
.animated-background {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
	border: none;
	pointer-events: none;
	opacity: 0.2;
	transform: rotate(var(--mouse-rotate)) scale(calc(var(--mouse-scale) * 1.2));
	transition: transform 0.3s ease-out;
}

.print {
	display: none;
}

nav a {
	color: var(--pico-primary-background);
	transition: all 0.2s ease;

	&:hover {
		color: var(--pico-primary-hover-background) !important;
		background: var(--glass-bg);
		backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
		-webkit-backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
		border-radius: 0.5rem;
	}

	&.active {
		background: var(--glass-bg) !important;
		backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate)) !important;
		-webkit-backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate)) !important;
		border-radius: 0.5rem !important;
		box-shadow: inset 0 0 0 1px var(--glass-border);
	}
}

// Content links in bright orange
main a,
article a,
section a {
	color: var(--pico-primary-background);

	&:hover {
		color: var(--pico-primary-hover-background);
	}
}

// Liquid Glass Deformation Effect for Details/Summary
details {
	position: relative;
	padding: 1.5rem;
	margin-bottom: 1.5rem;

	// Apply glass blur effect
	background: var(--glass-bg);
	backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
	-webkit-backdrop-filter: blur(var(--glass-blur-amount)) saturate(var(--glass-saturate));
	border: 2px solid var(--glass-border);
	border-radius: 1rem;
	box-shadow:
		0 8px 32px rgba(0, 0, 0, 0.3),
		inset 0 1px 0 rgba(255, 255, 255, 0.1),
		inset 0 -1px 0 rgba(0, 0, 0, 0.2);

	transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
	filter: url(#liquid-glass-filter);

	// Deformation effect on hover
	&:hover {
		transform: perspective(1000px) rotateX(2deg) scale(1.01);
		border-color: rgba(255, 149, 0, 0.5);
		background: rgba(255, 149, 0, 0.08);
		box-shadow:
			0 12px 48px rgba(255, 149, 0, 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 0.15),
			inset 0 -1px 0 rgba(0, 0, 0, 0.3);
	}

	// Enhanced effect when open
	&[open] {
		background: rgba(255, 149, 0, 0.1);
		border-color: rgba(255, 149, 0, 0.6);
		transform: perspective(1000px) scale(1.02);
		box-shadow:
			0 16px 64px rgba(255, 149, 0, 0.25),
			inset 0 2px 0 rgba(255, 255, 255, 0.2),
			inset 0 -2px 0 rgba(0, 0, 0, 0.4);

		summary {
			border-bottom: 1px solid rgba(255, 149, 0, 0.3);
			padding-bottom: 1rem;
			margin-bottom: 1rem;
		}
	}

	summary {
		cursor: pointer;
		list-style: none;
		padding: 0;
		transition: all 0.2s ease;
		position: relative;

		// Remove default marker
		&::-webkit-details-marker {
			display: none;
		}

		// Custom marker with glow
		&::before {
			content: 'â–¶';
			display: inline-block;
			margin-right: 0.75rem;
			transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
			color: var(--pico-primary-background);
			filter: drop-shadow(0 0 4px rgba(255, 149, 0, 0.6));
		}

		&:hover::before {
			filter: drop-shadow(0 0 8px rgba(255, 149, 0, 0.9));
		}
	}

	&[open] summary::before {
		transform: rotate(90deg);
	}
}

@media print {
	* {
		color: #000 !important;
		background-color: transparent !important;
		background-image: none !important;
		box-shadow: none !important;
		text-shadow: none !important;
	}

	body {
		background: #fff !important;
	}

	.print {
		display: inline-block;
	}

	div.print {
		display: block;
	}

	.no-print,
	.no-print *,
	.animated-background-2,
	.animated-background {
		display: none !important;
	}

	a {
		color: #555 !important;
		font-weight: 400 !important;
		text-decoration: none !important;
	}

	h1, h2, h3, h4, h5, h6 {
		color: #000 !important;
	}

	// Remove all badge/tag backgrounds
	span, div, article, section {
		background-color: transparent !important;
	}

	// Ensure borders are minimal
	*:not(table):not(td):not(th) {
		border-color: #ddd !important;
	}

	// Reset details/summary for print
	details {
		padding: 0 !important;
		margin-bottom: 0.5rem !important;
		background: transparent !important;
		backdrop-filter: none !important;
		border: none !important;
		border-radius: 0 !important;
		filter: none !important;
		transform: none !important;

		summary {
			border-bottom: none !important;
			padding-bottom: 0 !important;
			margin-bottom: 0 !important;

			&::before {
				filter: none !important;
			}
		}

		&[open] summary {
			border-bottom: 1px solid #ddd !important;
			padding-bottom: 0.25rem !important;
			margin-bottom: 0.5rem !important;
		}
	}
}
